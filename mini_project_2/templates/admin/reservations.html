{% extends "admin/layout_admin.html" %}
{% block content %}
<h1>Reservations</h1>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>ID</th>
      <th>Customer</th>
      <th>Phone</th>
      <th>Date</th>
      <th>Time</th>
      <th>Table No</th>
      <th>People</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for r in reservations %}
    <tr>
      <td>{{ r.id }}</td>
      <td>{{ r.name }}</td>
      <td>{{ r.phone }}</td>
      <td>{{ r.date }}</td>
      <td>
        {% set t = r.time %}
        {% if t and ':' in t %}
          {% set hour = t.split(':')[0]|int %}
          {% set minute = t.split(':')[1] %}
          {% if hour < 10 %}0{{ hour }}{% else %}{{ hour }}{% endif %}:{{ minute }}
        {% else %}
          {{ t }}
        {% endif %}
      </td>
      <td>{{ r.table_no }}</td>
      <td>{{ r.people }}</td>
      <td>{{ r.status }}</td>
      <td>
        <a href="{{ url_for('delete_reservation', id=r.id) }}"
           class="btn btn-danger btn-sm"
           onclick="return confirm('Delete this reservation?')">Delete</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
